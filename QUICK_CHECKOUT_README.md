# نظام الشراء السريع - Quick Checkout System

## الوصف
تم تطوير نظام شراء سريع يتطلب إدخال جميع البيانات المطلوبة قبل إتمام عملية الشراء مباشرة دون الحاجة لإضافة المنتج للسلة أولاً.

## المميزات الجديدة

### 1. الشراء السريع من صفحة المنتج
- زر "شراء سريع - ادفع عند الاستلام" في صفحة تفاصيل المنتج
- زر "شراء سريع" في بطاقة المنتج بجانب زر "إضافة للعربة"

### 2. التحقق من البيانات المطلوبة
- **الاسم الكامل** (مطلوب)
- **العنوان التفصيلي** (مطلوب)
- **المنطقة في ليبيا** (مطلوب - قائمة منسدلة)
- **رقم الهاتف** (مطلوب)

### 3. التحقق من صحة البيانات
- التحقق من ملء جميع الحقول المطلوبة
- التحقق من صحة رقم الهاتف
- التحقق من توفر المنتج في المخزون
- التحقق من صحة الكمية المطلوبة

### 4. عملية الشراء
1. المستخدم ينقر على "شراء سريع"
2. تظهر نافذة بيانات التوصيل
3. إذا كان لديه عنوان محفوظ، يتم ملء البيانات تلقائياً
4. يملأ البيانات المطلوبة أو يعدلها
5. ينقر على "إتمام الطلب"
6. يتم إنشاء الطلب مباشرة مع حالة "مؤكد"
7. تظهر رسالة نجاح مع رقم الطلب

## الملفات المضافة/المعدلة

### الواجهة الأمامية (Client)
- `components/shopping-view/quick-checkout-dialog.jsx` - نافذة الشراء السريع
- `components/shopping-view/order-success-dialog.jsx` - نافذة نجاح الطلب
- `components/shopping-view/product-details.jsx` - تعديل لإضافة الشراء السريع
- `components/shopping-view/product-tile.jsx` - تعديل لإضافة زر الشراء السريع

### الخادم (Server)
- `middleware/validation.js` - التحقق من صحة البيانات
- `controllers/shop/order-controller.js` - تحسين التحقق من البيانات
- `routes/shop/order-routes.js` - إضافة middleware التحقق
- `routes/shop/cart-routes.js` - إضافة middleware التحقق

## كيفية الاستخدام

### للمستخدم العادي
1. تصفح المنتجات
2. انقر على "شراء سريع" على أي منتج
3. املأ بيانات التوصيل (الاسم، العنوان، المنطقة، الهاتف)
4. انقر على "إتمام الطلب"
5. ستحصل على رسالة تأكيد مع رقم الطلب

### للمطور
```javascript
// استخدام مكون الشراء السريع
import QuickCheckoutDialog from './quick-checkout-dialog';

<QuickCheckoutDialog 
  open={showQuickCheckout}
  setOpen={setShowQuickCheckout}
  productDetails={product}
  quantity={1}
/>
```

## التحقق من البيانات

### في الواجهة الأمامية
- التحقق الفوري من ملء الحقول
- تعطيل زر الإرسال حتى ملء جميع البيانات
- رسائل خطأ واضحة

### في الخادم
- التحقق من وجود جميع البيانات المطلوبة
- التحقق من صحة تنسيق البيانات
- التحقق من توفر المنتج في المخزون
- رسائل خطأ مفصلة باللغة العربية

## المناطق المدعومة في ليبيا
- طرابلس
- بنغازي
- مصراتة
- الزاوية
- البيضاء
- طبرق
- درنة
- سرت
- سبها
- غات
- منطقة أخرى

## رسائل النجاح والخطأ
جميع الرسائل باللغة العربية وواضحة للمستخدم:
- "تم إتمام الطلب بنجاح!"
- "يجب إدخال جميع البيانات المطلوبة"
- "رقم الهاتف غير صحيح"
- "الكمية المطلوبة غير متوفرة"

## الأمان
- التحقق من البيانات في الواجهة والخادم
- منع إرسال طلبات فارغة أو غير صحيحة
- التحقق من توفر المنتجات قبل إنشاء الطلب
- تنظيف البيانات المدخلة

## ملاحظات مهمة
- النظام يدعم الدفع عند الاستلام فقط حالياً
- يتم حفظ العناوين تلقائياً لاستخدامها مستقبلاً
- يمكن للمستخدم إضافة حتى 3 عناوين
- جميع الطلبات تحتاج موافقة الإدارة قبل التوصيل